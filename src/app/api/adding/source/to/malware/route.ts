import { NextRequest, NextResponse } from "next/server";
import fs from "node:fs/promises"
import { source } from "@/app/utils";
export async function GET(){
    return source.getInstance().getSource().then((value)=>{
        return NextResponse.json({source:value.toString()})
    }).catch((e)=>{
        return NextResponse.json("something happened"+e)
    })
}
export async function POST(request:Request){
    return request.json().then((data)=>{
        if(data.source !== undefined && data.source.toString().replaceAll(" ","") !== ""){
            source.getInstance().setSource(data.source)
        }
        return NextResponse.json({"gagner":data.source})
    }).catch(e=>{
        return NextResponse.json({"resa":e.toString()})
    })
}